# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a standalone HTML application for generating character sheets for The One Ring tabletop RPG (魔戒TRPG). The application allows players to create, customize, and save character sheets with all the necessary attributes, skills, and equipment for the game.

## Key Features

- Character information management (name, culture, age, etc.)
- Automatic calculation of derived statistics based on character attributes
- Skill ranking system with specialization options
- Equipment management (weapons, armor, travel gear)
- Cultural blessings and calling features
- Character portrait upload functionality
- Local browser storage for saving/loading characters
- PDF export/print functionality

## File Structure

- `TheOneRing-CharacterCard.html` - Main application file containing all HTML, CSS, and JavaScript
- `ringbearer.TTF` - Custom font file for the UI

## Development Notes

This is a single-file HTML application with no build process. All functionality is contained within the HTML file, including:
- CSS styling (in the `<style>` tag)
- JavaScript logic (in the `<script>` tag)
- Data definitions for cultures, traits, skills, and equipment

## Common Development Tasks

### Modifying Character Attributes and Mechanics
- Attribute calculations are handled in the `updateAttributes()` function
- Derived stats (endurance, hope, parry) are calculated based on base attributes and cultural modifiers
- Cultural modifiers are defined in the `cultureData` object

### Adding New Equipment
- Combat gear presets are defined in the `combatGearPresets` array
- Protective gear presets are defined in the `protectiveGearPresets` array
- New presets will automatically appear in the selection modals

### Adding New Cultures or Callings
- Culture data is defined in the `cultureData` object, including blessings, living standards, modifiers, and available traits
- Calling features are defined in the `callingFeatures` object
- New options will automatically appear in the selection dropdowns

### Modifying Skills
- Skills are organized by attribute (Body, Heart, Wits) in the HTML structure
- Skill ranking checkboxes are dynamically generated by the `createRankCheckboxes()` function
- Combat proficiencies are handled separately in the combat section

## Data Persistence

Character data is saved to and loaded from the browser's localStorage using:
- `saveCharacter()` function to save all form data
- `loadCharacter()` function to restore form data
- Data includes all input fields, skill ranks, equipment tables, and character portrait

## UI Components

- Diamond-shaped attribute display for main character stats
- Modal dialogs for adding equipment
- Dynamic reward selectors based on valour rating
- Responsive design with print-specific styling

## Special Mechanics

- King of Men bonus for Northern Rangers (selectable attribute boost)
- Cultural trait restrictions (no duplicate traits)
- Dwarf load reduction for armor and helmets
- Game mode selection (Normal vs Simple) affecting target numbers